syntax = "proto3";

package goChat;

// Defines the service between client and server.
service Chat {
    // Registers the client with the server.
    rpc RegisterClient(ClientInfo) returns (Response) {}

    // Unregisters the client with the server.
    rpc UnRegisterClient(ClientInfo) returns (Response) {}

    // Gets the list of clients from the server.
    rpc GetClientList(List) returns (ClientList) {}

    // Routes the chat messages from client to client.
    rpc RouteChat(stream RouteMessage) returns (stream RouteMessage) {}
}

message List{

}

message Response {

}       

message ClientInfo {
    string ip = 1;
    int32 port = 2;
}


message RegistrationReply {
    string response = 1;
}

message ClientList {
    repeated string ip = 1;
    repeated int32 port = 2;
}

message RouteMessage {
    string ip = 1;
    string message = 2;
}
